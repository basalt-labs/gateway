# Messaging System

Basalt provides a unified interface for sending and receiving various types of media across all supported channels. Whether you are sending a simple text or a complex voice note, the API remains consistent.

## Overview

Every message in Basalt has a `type`. By default, messages are `text`. 

Supported types:
- `text`: Standard UTF-8 text message.
- `image`: Images with optional captions.
- `video`: Video files with optional captions.
- `audio`: General audio files.
- `voice`: Push-to-talk style voice notes.
- `document`: PDF, DOCX, or any other file format.

---

## üí¨ Sending Text

The most common way to interact with an agent.

**Payload:**
```json
{
  "to": "user_id",
  "content": "Hello operator, how can I assist you today?"
}
```

## üñºÔ∏è Sending Images

Supported on **WhatsApp**, **Telegram**, and **Discord**.

**Payload:**
```json
{
  "to": "user_id",
  "type": "image",
  "content": {
    "url": "https://example.com/status-report.png",
    "caption": "Latest system health report generated by Agent AG-9128."
  }
}
```

## üé§ Sending Voice Notes

Turn your AI's response into a Push-to-Talk voice message.

**Payload:**
```json
{
  "to": "user_id",
  "type": "voice",
  "content": {
    "url": "https://example.com/audio/greeting.mp3"
  }
}
```

## üìÇ Sending Documents

Perfect for sending logs, exports, or AI-generated reports.

**Payload:**
```json
{
  "to": "user_id",
  "type": "document",
  "content": {
    "url": "https://example.com/logs/agent-trace.pdf",
    "fileName": "system-trace.pdf"
  }
}
```

---

## üöâ Channel Specific Implementation

While Basalt normalizes the API, each platform has unique identifiers:

### WhatsApp
- **Identifier**: Phone number with country code (e.g., `62812345678@s.whatsapp.net`).
- **Groups**: Group ID (e.g., `1234567890@g.us`).

### Telegram
- **Identifier**: Numeric User ID or Username (e.g., `123456789` or `@username`).
- **Note**: The user must have initiated a conversation with the bot first.

### Discord
- **Identifier**: Channel ID (e.g., `102938475612345678`).
- **Support**: Discord supports all types; voice notes are converted to standard audio clips.

---

## üõ†Ô∏è Developer Protocol

When implementing a custom provider, you must adhere to the `ChannelProvider` interface:

```typescript
export interface ChannelProvider {
    name: string;
    sendMessage(to: string, content: string | MediaPayload, options?: SendMessageOptions): Promise<void>;
    // ...
}
```

For media messages, the `content` argument will be a `MediaPayload` object containing the `url` or `buffer` of the asset.
